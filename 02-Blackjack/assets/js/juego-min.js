(()=>{let e=document.querySelector("#btnPedir"),t=document.querySelector("#btnStop"),l=document.querySelector("#btnNuevo"),r=document.querySelectorAll("small"),a=document.querySelector("#mano-jugador"),n=document.querySelector("#mano-banca"),d=["C","D","H","S"],s=["A","J","Q","K"],o=[],i=[],c=()=>{let e=[];for(let t=2;t<=10;t++)for(let l of d)e.push(t+l);for(let r of d)for(let a of s)e.push(a+r);return _.shuffle(e)},u=e=>{let t=e.substring(0,e.length-1);return isNaN(t)?"A"===t?11:10:Number(t)},$=()=>{if(0===o.length)throw"No hay cartas en el deck";return o.pop()},p=(e,t)=>(i[t]=i[t]+u(e),r[t].innerText=i[t],i[t]),b=e=>{let t=document.createElement("img");return t.classList.add("w-[110px]","sm:w-[130px]","md:w-[150px]","flex-shrink-0","rounded-lg","shadow-md"),t.src=`./assets/cartas/${e}.png`,t},f=(l=2)=>{o=c(),i=Array(l).fill(0),r.forEach(e=>e.innerText=0),a.innerHTML="",n.innerHTML="",e.disabled=!1,t.disabled=!1},h=e=>{let t=i.length-1;do{let l=$();if(p(l,t),n.append(b(l)),e>21)break}while(i[t]<e&&e<=21);setTimeout(()=>{let l=i[t];l===e?alert("Empate"):e>21?alert("Computadora gana"):l>21?alert("\xa1Ganaste!"):alert("Computadora gana")},10)};e.addEventListener("click",()=>{let l=$(),r=p(l,0);a.append(b(l)),r>21?(e.disabled=!0,t.disabled=!0,h(r)):21===r&&(e.disabled=!0,t.disabled=!0,h(r))}),t.addEventListener("click",()=>{e.disabled=!0,t.disabled=!0,h(i[0])}),l.addEventListener("click",()=>{f()}),f()})();